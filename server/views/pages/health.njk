{% extends "../partials/layout.njk" %}
{% from "../macros/assessmentInformation.njk" import assessmentInformation %}
{% set pathway = "Health" %}
{% set pageTitle = applicationName + " - " + pathway %}
{% set mainClasses = "app-container govuk-body" %}
{% set pathwayStatus = prisonerData.pathways | filterByPathway( pathway | getEnumByName ) %}
{% set supportNeedsEnabled = features.SUPPORT_NEEDS | getFeatureFlag %}

{% block content %}
  <div class="govuk-grid-row govuk-!-padding-top-4 govuk-!-padding-bottom-4">
    {{ titleAndIntro(pathway) }}
    <div class="govuk-grid-column-one-third">
      {{ statusDetails(pathwayStatus, prisonerData.personalDetails.prisonerNumber, pathway) }}
    </div>
  </div>
  <div class="govuk-grid-row govuk-!-padding-top-4">
    <div class="govuk-grid-column-one-quarter sticky-anchor-links">
      {% set subNavItems = [
        {
          name: "Support needs" if supportNeedsEnabled else "Case notes and status history",
          id: "support-needs" if supportNeedsEnabled else "case-notes"
        }
      ] %}
        {% set subNavItems = subNavItems.concat([
          {
            name: "Report information",
            id: "assessment-information"
          }
        ]) %}
      {% set subNavItems = (subNavItems.concat(crsReferrals.results[0].referrals | createReferralsSubNav)) %}
      {{ subNav(subNavItems) }}
    </div>
    <div class="govuk-grid-column-three-quarters">
      {% if supportNeedsEnabled %}
        {% include "../partials/supportNeedsSummary.njk" %}
      {% endif %}
      {% include "../partials/caseNotes.njk" %}
      {{ assessmentInformation(assessmentData, prisonerData.personalDetails.prisonerNumber, pathway) }}
      {% include "../partials/crsReferrals.njk" %}
    </div>
  </div>
{% endblock %}