{% extends "../partials/layout.njk" %}
{% set pathway = "Finance and ID" %}
{% set pageTitle = applicationName + " - " + pathway + " - Add a bank account application"%}
{% set mainClasses = "app-container govuk-body" %}
{% set pathwayStatus = prisonerData.pathways | filterByPathway(pathway | getEnumByName) %}
{% block content %}
  <div class="govuk-grid-row govuk-!-padding-top-4 govuk-!-padding-bottom-4">
    {{ titleAndIntro(pathway) }}
  </div>
  <div class="govuk-grid-row govuk-!-padding-bottom-4">
    <div class="govuk-grid-column-full">
      <h3 class="govuk-heading-m">Apply for a bank account</h3>
      <form action="/finance-and-id/confirm-add-a-bank-account/" class="govuk-form" novalidate>
        {% if params.applicationType === "resubmit" %}
          <div class="govuk-form-group">
            <label class="govuk-label" for="application-resubmitted">Date application resubmitted</label>
            <div class="govuk-date-input" id="application-resubmitted">
              <div class="govuk-date-input__item">
                <div class="govuk-form-group">
                  <label class="govuk-label govuk-date-input__label" for="applicationResubmittedDay">Day</label>
                  <input class="govuk-input govuk-date-input__input govuk-input--width-2 " id="applicationResubmittedDay" name="applicationResubmittedDay" type="text" value="{{ params.applicationResubmittedDay if params.applicationResubmittedDay | length else "" }}" inputmode="numeric">
                </div>
              </div>
              <div class="govuk-date-input__item">
                <div class="govuk-form-group">
                  <label class="govuk-label govuk-date-input__label" for="applicationResubmittedMonth">Month</label>
                  <input class="govuk-input govuk-date-input__input govuk-input--width-2 " id="applicationResubmittedMonth" name="applicationResubmittedMonth" type="text" value="{{ params.applicationResubmittedMonth if params.applicationResubmittedMonth | length else "" }}" inputmode="numeric">
                </div>
              </div>
              <div class="govuk-date-input__item">
                <div class="govuk-form-group">
                  <label class="govuk-label govuk-date-input__label" for="applicationResubmittedYear">Year</label>
                  <input class="govuk-input govuk-date-input__input govuk-input--width-4 " id="applicationResubmittedYear" name="applicationResubmittedYear" type="text" value="{{ params.applicationResubmittedYear if params.applicationResubmittedYear | length else "" }}" inputmode="numeric">
                </div>
              </div>
            </div>
          </div>
          <div class="govuk-form-group">
            <label class="govuk-label" for="application">Resubmitted application status</label>
            <select class="govuk-select status-select" id="bank-account-application-status" name="status">
              <option value="">Select status</option>
              <option value="Account opened" {% if params.status == "Account opened" %}selected{% endif %}>Account opened</option>
              <option value="Account declined" {% if params.status == "Account declined" %}selected{% endif %}>Account declined</option>
            </select>
          </div>
          <div class="govuk-form-group conditional-form-fields" {% if params.status == '' or not params.status %}hidden{% endif %}>
            <div class="account-declined-form" {% if params.status == 'Account opened' %}hidden{% endif %}>
              <label class="govuk-label" for="date-resubmitted-bank-details-received">Date heard back from resubmission</label>
              <div class="govuk-date-input" id="date-resubmitted-bank-details-received">
                <div class="govuk-date-input__item">
                  <div class="govuk-form-group">
                    <label class="govuk-label govuk-date-input__label" for="date-resubmitted-bank-details-heard-day">
                      Day
                    </label>
                    <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="date-resubmitted-bank-details-heard-day" name="dateResubmittedHeardDay" type="text" value="{{ params.dateResubmittedHeardDay if params.dateResubmittedHeardDay | length else "" }}" inputmode="numeric">
                  </div>
                </div>
                <div class="govuk-date-input__item">
                  <div class="govuk-form-group">
                    <label class="govuk-label govuk-date-input__label" for="date-resubmitted-bank-details-heard-month">
                      Month
                    </label>
                    <input class="govuk-input govuk-date-input__input govuk-input--width-2 " id="date-resubmiited-resubmitted-bank-details-heard-month" name="dateResubmittedHeardMonth" type="text" value="{{ params.dateResubmittedHeardMonth if params.dateResubmittedHeardMonth | length else "" }}" inputmode="numeric">
                  </div>
                </div>
                <div class="govuk-date-input__item">
                  <div class="govuk-form-group">
                    <label class="govuk-label govuk-date-input__label" for="date-resubmitted-bank-details-heard-year">
                      Year
                    </label>
                    <input class="govuk-input govuk-date-input__input govuk-input--width-4 " id="date-resubmitted-bank-details-heard-year" name="dateResubmittedHeardYear" type="text" value="{{ params.dateResubmittedHeardYear if params.dateResubmittedHeardYear | length else "" }}" inputmode="numeric">
                  </div>
                </div>
              </div>
            </div>
            <div class="account-opened-form" {% if params.status == 'Account declined' %}hidden{% endif %}>
              <label class="govuk-label" for="date-account-opened">Date account opened</label>
              <div class="govuk-date-input govuk-!-margin-bottom-5" id="date-account-opened">
                <div class="govuk-date-input__item">
                  <div class="govuk-form-group">
                    <label class="govuk-label govuk-date-input__label" for="account-opened-day">
                      Day
                    </label>
                    <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="account-opened-day" name="accountOpenedDay" type="text" value="{{ params.accountOpenedDay if params.accountOpenedDay | length else "" }}" inputmode="numeric">
                  </div>
                </div>
                <div class="govuk-date-input__item">
                  <div class="govuk-form-group">
                    <label class="govuk-label govuk-date-input__label" for="account-opened-month">
                      Month
                    </label>
                    <input class="govuk-input govuk-date-input__input govuk-input--width-2 " id="date-resubmiited-resubmitted-bank-details-heard-month" name="accountOpenedMonth" type="text" value="{{ params.accountOpenedMonth if params.accountOpenedMonth | length else "" }}" inputmode="numeric">
                  </div>
                </div>
                <div class="govuk-date-input__item">
                  <div class="govuk-form-group">
                    <label class="govuk-label govuk-date-input__label" for="account-opened-year">
                      Year
                    </label>
                    <input class="govuk-input govuk-date-input__input govuk-input--width-4 " id="account-opened-year" name="accountOpenedYear" type="text" value="{{ params.accountOpenedYear if params.accountOpenedYear | length else "" }}" inputmode="numeric">
                  </div>
                </div>
              </div>
              <div class="govuk-form-group">
                <fieldset class="govuk-fieldset" aria-describedby="Added to personal items">
                  <label class="govuk-label">Added to personal items</label>
                  <div class="govuk-radios" data-module="govuk-radios">
                    <div class="govuk-radios__item">
                      <input class="govuk-radios__input" id="added-to-items-yes" name="addedToPersonalItems" type="radio" value="Yes" aria-controls="conditional-added-to-items-yes" aria-expanded="false" {% if params.addedToPersonalItems == 'Yes' %}checked{% endif %}>
                      <label class="govuk-label govuk-radios__label" for="added-to-items-yes">Yes</label>
                    </div>
                    <div class="govuk-radios__conditional govuk-radios__conditional--hidden" id="conditional-added-to-items-yes">
                      <div class="govuk-form-group">
                        <label class="govuk-label">Date added</label>
                        <div class="govuk-date-input">
                          <div class="govuk-date-input__item">
                            <div class="govuk-form-group">
                              <label class="govuk-label govuk-date-input__label" for="day">Day</label>
                              <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="day" name="dateAddedDay" type="number" pattern="[0-9]*" inputmode="numeric" min="1" max="31" value="{{ params.dateAddedDay if params.dateAddedDay }}">
                            </div>
                          </div>
                          <div class="govuk-date-input__item">
                            <div class="govuk-form-group">
                              <label class="govuk-label govuk-date-input__label" for="month">Month</label>
                              <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="month" name="dateAddedMonth" type="number" pattern="[0-9]*" inputmode="numeric" min="1" max="12" value="{{ params.dateAddedMonth if params.dateAddedMonth }}">
                            </div>
                          </div>
                          <div class="govuk-date-input__item">
                            <div class="govuk-form-group">
                              <label class="govuk-label govuk-date-input__label" for="year">Year</label>
                              <input class="govuk-input govuk-date-input__input govuk-input--width-4" id="year" name="dateAddedYear" type="number" pattern="[0-9]*" inputmode="numeric" min="1900" max="2099" value="{{ params.dateAddedYear if params.dateAddedYear }}">
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="govuk-radios__item">
                      <input class="govuk-radios__input" id="added-to-items-no" name="addedToPersonalItems" type="radio" value="No" data-aria-controls="conditional-added-to-items-no" {% if params.addedToPersonalItems == 'No' %}checked{% endif %}>
                      <label class="govuk-label govuk-radios__label" for="added-to-items-no">No</label>
                    </div>
                  </div>
                </fieldset>
              </div>
            </div>
          </div>
        {% else %}
          <div class="govuk-form-group">
            <label class="govuk-label" for="bank">Bank</label>
            <select class="govuk-select" id="bank" name="bankName">
              <option value="">Select bank</option>
              <option value="Barclays" {% if params.bankName == "Barclays" %}selected{% endif %}>Barclays</option>
              <option value="Co-op" {% if params.bankName == "Co-op" %}selected{% endif %}>Co-op</option>
              <option value="HSBC" {% if params.bankName == "HSBC" %}selected{% endif %}>HSBC</option>
              <option value="Lloyds" {% if params.bankName == "Lloyds" %}selected{% endif %}>Lloyds</option>
              <option value="Nationwide" {% if params.bankName == "Nationwide" %}selected{% endif %}>Nationwide</option>
              <option value="NatWest" {% if params.bankName == "NatWest" %}selected{% endif %}>NatWest</option>
              <option value="Santander" {% if params.bankName == "Santander" %}selected{% endif %}>Santander</option>
            </select>
          </div>

          <div class="govuk-form-group">
            <label class="govuk-label" for="application-submitted">Application submitted</label>
            <div class="govuk-date-input" id="application-submitted">
              <div class="govuk-date-input__item">
                <div class="govuk-form-group">
                  <label class="govuk-label govuk-date-input__label" for="applicationSubmittedDay">Day</label>
                  <input class="govuk-input govuk-date-input__input govuk-input--width-2 " id="applicationSubmittedDay" name="applicationSubmittedDay" type="text" value="{{ params.applicationSubmittedDay if params.applicationSubmittedDay | length else "" }}" inputmode="numeric">
                </div>
              </div>
              <div class="govuk-date-input__item">
                <div class="govuk-form-group">
                  <label class="govuk-label govuk-date-input__label" for="applicationSubmittedMonth">Month</label>
                  <input class="govuk-input govuk-date-input__input govuk-input--width-2 " id="applicationSubmittedMonth" name="applicationSubmittedMonth" type="text" value="{{ params.applicationSubmittedMonth if params.applicationSubmittedMonth | length else "" }}" inputmode="numeric">
                </div>
              </div>
              <div class="govuk-date-input__item">
                <div class="govuk-form-group">
                  <label class="govuk-label govuk-date-input__label" for="applicationSubmittedYear">Year</label>
                  <input class="govuk-input govuk-date-input__input govuk-input--width-4 " id="applicationSubmittedYear" name="applicationSubmittedYear" type="text" value="{{ params.applicationSubmittedYear if params.applicationSubmittedYear | length else "" }}" inputmode="numeric">
                </div>
              </div>
            </div>
          </div>
        {% endif %}
        <input type="hidden" name="prisonerNumber" value="{{ prisonerData.personalDetails.prisonerNumber }}">
        <input type="hidden" name="applicationId" value="{{ params.applicationId }}"/>
        <input type="hidden" name="confirmationType" value="{{ "resubmit" if params.applicationType === "resubmit" else "addAccount" }}">
        <input type="hidden" name="applicationType" value="{{ params.applicationType }}">
        <button class="govuk-button" type="submit">Submit</button>
      </form>
    </div>
  </div>
{% endblock %}
{% block bodyEnd %}
  {{ super() }}
  <script src="/assets/js/resubmit-bank-application.js"></script>
{% endblock %}